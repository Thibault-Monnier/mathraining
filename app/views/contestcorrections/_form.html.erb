<div class="<%= "mt-1" if @contestsolution.official? %><%= "mt-3" unless @contestsolution.official? %> mb-2">
<%= render 'shared/preview' %>
<%= render 'shared/smiley' %>
<% if @ancientexte.nil? %>
  <%= f.text_area :content, :class => "form-control", :maxlength => "8000", :style => "height:200px;", :id=>"MathInput", :onkeyup => "PreviewSafe.MyUpdate()", :disabled => (!@signed_in || current_user.other || @was_reserved) %>
<% else %>
  <%= f.text_area :content, :class => "form-control", :maxlength => "8000", :style => "height:200px;", :value => @ancientexte, :id=>"MathInput", :onkeyup => "PreviewSafe.MyUpdate()", :disabled => (!@signed_in || current_user.other || @was_reserved) %>
<% end %>
<script>initAndUpdatePreviewSafeWhenPossible()</script>
</div>

<% if !@contestsolution.official? %>
  <div class="mb-2">
  <label class="form-label">Score attribu√© (sur 7)</label>
  <% if @ancientexte.nil? %>
    <input type="number" name="score" class="form-control" style="width:70px;" min="0" max="7" id="score" value="<%= @contestsolution.score if @contestsolution.score >= 0 %>" <%= 'disabled="disabled"' if (!@signed_in || current_user.other || @was_reserved) %> />
  <% else %>
    <input type="number" name="score" class="form-control" style="width:70px;" min="0" max="7" id="score" value="<%= @ancienscore %>" <%= 'disabled="disabled"' if (!@signed_in || current_user.other || @was_reserved) %> />
  <% end %>
  </div>
<% end %>
