<script type="text/javascript">
function RemainingTime(){

if (!Date.now) {
    Date.now = function() { return new Date().getTime(); }
}

var d = Math.floor(Date.now() / 1000)

var reste = <%= @virtualtest.duration * 60 %> - d + <%= depart %>

if (reste < 0) {
  document.getElementById('clockbox').innerHTML = "Temps écoulé"
}
else {
  var resteh = Math.floor(reste / 3600)
  reste = reste - 3600 * resteh
  var restem = Math.floor(reste / 60)
  var restes = reste - 60 * restem
  
  if(resteh < 10){ afficheh = "0" + resteh }
  else { afficheh = resteh }
  
  if(restem < 10){ affichem = "0" + restem }
  else { affichem = restem }
  
  if(restes < 10){ affiches = "0" + restes }
  else { affiches = restes }
  
  document.getElementById('clockbox').innerHTML = afficheh + "h" + affichem + ":" + affiches
}

}

window.onload=function(){
RemainingTime();
setInterval(RemainingTime,1000);
}
</script>
